<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCG SDK for Android: Basic implementation Guides</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_inka.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">NCG SDK for Android<span id="projectnumber">&#160;Build 20220425</span>
   </div>
   <div id="projectbrief">INKA Entworks NCG DRM Library for Android</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('implementation_basic_guides.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Basic implementation Guides </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><!DOCTYPE html>
<html>
<head>
<title>PallyCon_implematation_Guide_Android_ENG.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="a-name%22doctop%22apallycon-android-sdk-application-guide"><a name="doc_top"></a>PallyCon Android SDK Application Guide</h1>
<h2 id="1-development-environment-setting">1. Development Environment Setting</h2>
<blockquote>
<p><strong>NOTE</strong>
This document is prepared in accordance with the following environment.</p>
</blockquote>
<p>For the installation of PallyCon Android SDK, only copy the files.
Since PallyCon Android SDK consists of jar and so files, there’s no need of a separate installation but just copy the appropriate files to the library folder (libs) of Application project to which SDK applies.
As shown in demo project, in order to apply PallyCon Android SDK to a separate project, you can set project according to the following steps:</p>
<ol>
<li>
<p>Copy so files to libs/armeabi folder.</p>
</li>
<li>
<p>Copy ncg2sdk.jar file to libs folder.</p>
</li>
<li>
<p>As shown in the following figure, add ncg2sdk.jarfile to &quot;Java Build Path&quot;.</p>
</li>
</ol>
<p><img src="build_setting.png" width="700" height="450"></p>
<ol start="4">
<li>Also as shown in the following figure, check ncg2sdk.jar on &quot;Order and Export&quot; tab.</li>
</ol>
<p><img src="build_setting_check.png" width="700" height="450"></p>
<blockquote>
<p><strong>NOTE</strong>
In case of managing jar files by generating another folder in libs folder within project, FATAL error may occur when running App.
In this case, check ncg2sdk.jar on &quot;Order and Export&quot; tab.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="androidmanifestxml-authorization-setting">AndroidManifest.xml Authorization Setting</h3>
<p>For a normal use of PallyCon Android SDK, the authorizations to be basically required are as follows:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_LOGS</td>
<td>Authority to read LOG</td>
</tr>
<tr>
<td>INTERNET</td>
<td>Authority to use network</td>
</tr>
<tr>
<td>WRITE_EXTERNAL_STORAGE</td>
<td>Authority to use external storage</td>
</tr>
<tr>
<td>READ_PHONE_STATE</td>
<td>Authority to read the status of device</td>
</tr>
<tr>
<td>MOUNT_UNMOUNT_FILESYSTEMS</td>
<td>Authority to edit file system</td>
</tr>
</tbody>
</table>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="2-initialization">2. Initialization</h2>
<p>Core object is generated only one while App is running in a single tone.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoLibrary</span> </span>{
    ...
    <span class="hljs-keyword">static</span> Ncg2Agent g_ncgAgent = Ncg2SdkFactory.getNcgAgentInstance();
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> Ncg2Agent <span class="hljs-title">getNcgAgent</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> g_ncgAgent;
    }
    ...
}
</div></code></pre>
<p>In order to use Ncg2Agent object, necessarily perform the initialization work through init() method.
In general, init() method of Ncg2Agent is called at a time when App starts (onCreate of android.app.Application).
It is noted that if internal methods are called when Ncg2Agent object has not been initialized or already released, an error occurs.</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NotSupportOffline</td>
<td>Not support offline mode</td>
</tr>
<tr>
<td>OfflineSupport</td>
<td>Support offline mode</td>
</tr>
</tbody>
</table>
<p>If you set the offlice policy to 'OfflineSupport' then you can limit the count of execution.
The default limit count is 10 and the value can be changed by calling the method of setCountOfExecutionLimit of OfflineSupportPolicy enum class.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{
    ...
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate();
        initializeNcgAgent();
    }
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initializeNcgAgent</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">try</span> {
            DemoLibrary.getNcgAgent().setHttpRequestCallback(mHttpRequestCallback);
            Ncg2Agent.OfflineSupportPolicy policy = Ncg2Agent.OfflineSupportPolicy.OfflineSupport;
            policy.setCountOfExecutionLimit(<span class="hljs-number">20</span>);
            DemoLibrary.getNcgAgent().init(<span class="hljs-keyword">this</span>, policy);
            DemoLibrary.getNcgAgent().enableLog();
        } <span class="hljs-keyword">catch</span> (Ncg2Exception e) {
            e.printStackTrace();
            String errorMsg = <span class="hljs-string">"Exception in init() : "</span> + e.getMessage();
            Log.e(DemoLibrary.TAG, errorMsg);
            Toast.makeText(<span class="hljs-keyword">this</span>, errorMsg, Toast.LENGTH_LONG).show();
        }
    }
    ...
}
</div></code></pre>
<p>Controlling HTTP communication inside PallyCon Android SDK requires implementing HttpRequestCallback in App and then initialize it before setting Callback.
Setting HttpRequestCallback Callback object requires using Ncg2Agent.setHttpRequestCallback method.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DemoApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span></span>{
    <span class="hljs-keyword">private</span> Ncg2Agent.HttpRequestCallback mHttpRequestCallback = <span class="hljs-keyword">new</span> Ncg2Agent.HttpRequestCallback() {
        ...
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">sendRequest</span><span class="hljs-params">(String url, String param)</span></span>{
            ...
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] sendRequestResponseBytes(String url, String param) <span class="hljs-keyword">throws</span> NcgHttpRequestException {
            ...
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] sendRequest(String url, String param, <span class="hljs-keyword">int</span> begin, <span class="hljs-keyword">int</span> end) <span class="hljs-keyword">throws</span> NcgHttpRequestException {    
            ...
        }
    }
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initializeNcgAgent</span><span class="hljs-params">()</span> </span>{
        ...
        DemoLibrary.getNcgAgent().setHttpRequestCallback(mHttpRequestCallback);
        ...
    }
 }
</div></code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="3-license">3. License</h2>
<h3 id="confirmation-of-license">Confirmation of License</h3>
<p>In order to use the content applying DRM, you must be obtained a license.
Licensed file contains the authorization of content including effective period, play count, and whether TV-out is permitted, etc.
Thus, playing the content requires the issuance of license from the server; if there’s no license or if any, it is not valid, using DRM content shall be restricted.
For the confirmation of license, the functions to be provided by PallyCon Android SDK are as follows:</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Ncg2Agent</span></span>{
    <span class="hljs-comment">// Confirm whether a file situated in the entered path and URL is NCG file.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isNcgContent</span><span class="hljs-params">(String strFileOrURL)</span> <span class="hljs-keyword">throws</span> Ncg2Exception
    
    <span class="hljs-comment">// Confirm the license of file situated in the entered path and URL for validity.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isLicenseValid</span><span class="hljs-params">(String strFileOrURL)</span> throw Ncg2Exception
    
    <span class="hljs-comment">// Confirm the license of content for validity.</span>
    <span class="hljs-keyword">public</span> LicenseValidation <span class="hljs-title">checkLicenseValid</span><span class="hljs-params">(String path)</span> <span class="hljs-keyword">throws</span> Ncg2Exception
}
</span></div></code></pre>
<p>LicenseValidation enum type returned from checkLicenseValid method is as follows:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ValidLicense</td>
<td>Valid license</td>
</tr>
<tr>
<td>NotExistLicense</td>
<td>No license or invalid license</td>
</tr>
<tr>
<td>ExternalDeviceDisallowed</td>
<td>License with external output device disallowed</td>
</tr>
<tr>
<td>RootedDeviceDisallowed</td>
<td>License disallowed from rooted terminal</td>
</tr>
<tr>
<td>ExpiredLicense</td>
<td>Expired license</td>
</tr>
<tr>
<td>ExceededPlayCount</td>
<td>License with play count exceeded</td>
</tr>
<tr>
<td>DeviceTimeModified</td>
<td>Detected the device time modified</td>
</tr>
<tr>
<td>OfflineNotSupported</td>
<td>Failed to access server and detected offline in the course of initializing under the policy not supporting offline mode</td>
</tr>
<tr>
<td>OfflineStatusTooLong</td>
<td>A state necessary of online mode because of too many cases executed offline. For more information, refer to the following note.</td>
</tr>
<tr>
<td>NotAuthorizedAppID</td>
<td>Failed to initialize since the executing App is not authenticated in server</td>
</tr>
<tr>
<td>ScreenRecorderDetected</td>
<td>Detected a screen recording app</td>
</tr>
</tbody>
</table>
<p>In Sample Project, confirm license for validity in the following order.</p>
<pre class="hljs"><code><div>    <span class="hljs-keyword">if</span>( DemoLibrary.getNcgAgent().isNcgContent(path) == <span class="hljs-keyword">false</span> ) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    
    Ncg2Agent.LicenseValidation validation = DemoLibrary.getNcgAgent().checkLicenseValid(path);
        <span class="hljs-keyword">if</span>( validation == LicenseValidation.ValidLicense ) {
            <span class="hljs-comment">// Routine to process license for validity</span>
            ...
    
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( validation == LicenseValidation.NotExistLicense ) {
            <span class="hljs-comment">// No license or invalid license</span>
            ...
        
            <span class="hljs-comment">// Request license to license server</span>
            DemoLibrary.getNcgAgent().acquireLicenseByPath( path, DemoLibrary.getUserID(), DemoLibrary.getOrderID() );
            <span class="hljs-keyword">if</span>( DemoLibrary.getNcgAgent().checkLicenseValid(path) == LicenseValidation.ValidLicense ) {
                <span class="hljs-comment">// Acquire valid license from server</span>
            
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// Not acquire license from server</span>
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( validation == LicenseValidation.ExternalDeviceDisallowed) {
            <span class="hljs-comment">// Not allow to play to the connection to external device such as HDMI device</span>
            ...
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( validation == LicenseValidation.RootedDeviceDisallowed) {
            <span class="hljs-comment">// License not allowed in Rooting terminal.</span>
            ...
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(validation == LicenseValidation.ExpiredLicense){
            <span class="hljs-comment">// Expired license</span>
            ...
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(validation == LicenseValidation.ExceededPlayCount){
            <span class="hljs-comment">// Frequency license with play count exceeded</span>
            ...
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(validation == LicenseValidation.ScreenRecorderDetected ){
            <span class="hljs-comment">// You can check the package name and the appName of screen recorder app.</span>
            HashMap&lt;String,String&gt; data = validation.getExtraData();
            String appName = data.get(<span class="hljs-string">"AppName"</span>);
            String packageName = data.get(<span class="hljs-string">"AppPackageName"</span>);
            ...
        }
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
In order to detect the cases where a user intentionally changes device time,
in the other license types other than unlimited license, if it executes more than limit value set by setCountOfExecutionLimit method in the internal offline mode, OfflineStatusTooLong value is returned.
OfflineStatusTooLong value is only operated when it is set as OfflineSupport parameter option at init() method called.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="issuance-and-renewal-of-license">Issuance and Renewal of License</h3>
<p>No license or expired license requires the issuance of license suitable for the applicable content. The license may be issued at any time before actual use; however, SDK Sample App Project tries to issue license at a time to play. The timing to issue license depends on App scenario, but the license is generally requested at a time to play.
The functions supported by PallyCon Android SDK to issue license are as follows:</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Ncg2Agent</span></span>{
    <span class="hljs-comment">// Acquire license via the entered path with UserID and OrderID.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireLicenseByPath</span><span class="hljs-params">(String path, String userId, String orderId)</span> <span class="hljs-keyword">throws</span> Ncg2Exception

    <span class="hljs-comment">// Acquire license via the entered path with UserID and OrderID, there can be acquired temporary license by setting a temporary.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireLicenseByPath</span><span class="hljs-params">( String path, String userID, String orderID, <span class="hljs-keyword">boolean</span> temporary )</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;

    <span class="hljs-comment">// Acquire license using Content ID.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireLicenseByCID</span><span class="hljs-params">(String cid, String userID, String orderID, String acquisitionURL)</span> throw Ncg2Exception

    <span class="hljs-comment">// Acquire license using Content ID.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireLicenseByCID</span><span class="hljs-params">(String cid, String userID, String siteID, String orderID, String acquisitionURL)</span> throw Ncg2Exception

    <span class="hljs-comment">// Acquire license using Content ID, there can be acquired temporary license by setting a temporary.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquireLicenseByCID</span><span class="hljs-params">(String cid, String userID, String siteID, String orderID, String acquisitionURL, <span class="hljs-keyword">boolean</span> temporary )</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;        
}
</div></code></pre>
<p>Unlike term license, frequency license requires confirming license information.
If you use frequency license, the functions that deduct the frequency are provided by PallyCon Android SDK; and such deduction is conducted at a time when license is issued and virtual URL return is completed.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">private</span> OnPreparedListener mPreparedListener = <span class="hljs-keyword">new</span> OnPreparedListener(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPrepared</span><span class="hljs-params">(MediaPlayer mp)</span> </span>{
        ...
        <span class="hljs-keyword">if</span>( mIsCountLimitedContent ) {
            DemoLibrary.getNcgAgent().decreasePlayCount(mNcgFilePath);
        }
        ...
    }
}
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
For remote content (PD/HLS), if network environment is not stable, license issuance and content playing may not be smoothly conducted.
If there need acquire license whenever you play the content, it is preferable to acquire temporary license.
For Downloaded Contents, if license has been issued, it may play in an environment without network. Thus, it is desirable to acquire license at a time that contents are completely downloaded (i.e., network is connected).</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="license-deletion">License Deletion</h3>
<p>Already-issued license may be necessarily discarded in accordance with APP scenario. In this case, the functions related to license deletion are as follows, which you can use suitable for scenario. The temporary license may be terminated at any time after use; For the SDK Sample App Project, the license is terminated when the video play is stopped.</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Ncg2Agent</span></span>{
    <span class="hljs-comment">// Delete license via all CIDs of the issued licenses.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeLicenseAllCID</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2Exception

    <span class="hljs-comment">// Delete temporary license.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeAllTemporaryLicense</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2Exception

    <span class="hljs-comment">// Delete license via CID.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeLicenseByCID</span><span class="hljs-params">(strContentsID)</span> throw Ncg2Exception

    <span class="hljs-comment">// Delete license of the content in the file path.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">removeLicenseByPath</span><span class="hljs-params">(strFilename)</span> <span class="hljs-keyword">throws</span> Ncg2Exception
}
</span></div></code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="4-play">4. Play</h2>
<p>If license is normally issued using PallyCon Androide SDK, using Ncg2LocalWebServer interface, you can control LocalWebserver located inside.
If you designate the path of PallyCon content to play PallyCon content, it can be used in a form to return virtual URL.
After obtaining virtual URL you can access MediaPlayer or 3th Party Player provided by Android for playing.
The followings are virtual URL return functions provided by Ncg2LocalWebServer.</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Ncg2LocalWebServer</span></span>{
    <span class="hljs-comment">// In case of Local File,</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addLocalFilePathForPlayback</span><span class="hljs-params">(Activity activity, String url, <span class="hljs-keyword">long</span> fileSize)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;
    
    <span class="hljs-comment">// In case of PD contents,</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addProgressiveDownloadUrlForPlayback</span><span class="hljs-params">(Activity activity, String url)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;
    
    <span class="hljs-comment">// In case of HLS,</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addHttpLiveStreamUrlForPlayback</span><span class="hljs-params">(Activity activity, String url)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;

    <span class="hljs-comment">// In case of HLS (live),</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addHttpLiveStreamUrlForPlayback</span><span class="hljs-params">(Activity activity, String url, <span class="hljs-keyword">boolean</span> isLiveHLS)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;
    
    <span class="hljs-comment">// In case of HLS,</span>
    <span class="hljs-comment">// unlike addHttpLiveStreamUrlForPlayback(), do not prior check key file equivalent to m3u8 path.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addHttpLiveStreamUrlForPlaybackWithoutChecking</span><span class="hljs-params">(Activity activity, String url)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;
    
    <span class="hljs-comment">// In case of HLS,</span>
    <span class="hljs-comment">// You can call this method to add HLS url without accessing the URLs of m3u8 and key file.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addHttpLiveStreamUrlForPlayback</span><span class="hljs-params">(Activity activity, String url, String cid)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;

    <span class="hljs-comment">// In case of HLS (live),</span>
    <span class="hljs-comment">// You can call this method to add HLS url without accessing the URLs of m3u8 and key file.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addHttpLiveStreamUrlForPlayback</span><span class="hljs-params">(Activity activity, String url, String cid, <span class="hljs-keyword">boolean</span> isLiveHLS)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2Exception</span>;
}
</div></code></pre>
<p>The following code indicates how to obtain virtual URL from PallyCon contents.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PlayerActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{
    ...
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        Ncg2Agent ncgAgent = Ncg2SdkFactory.getNcgAgentInstance();
        Ncg2LocalWebServer ncgLocalWebServer = ncgAgent.getLocalWebServer();
        ncgLocalWebServer.setWebServerListener(mWebServerCallback);
        ncgLocalWebServer.clearPlaybackUrls();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span>( mNcgFilePath.contains(<span class="hljs-string">".m3u8"</span>) ) {
                <span class="hljs-comment">// HLS Playback</span>
                mPlaybackURL = ncgLocalWebServer.addHttpLiveStreamUrlForPlayback(mNcgFilePath);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(mNcgFilePath.startsWith(<span class="hljs-string">"http://"</span>)) {
                <span class="hljs-comment">// PD Playback</span>
                mPlaybackURL = ncgLocalWebServer.addProgressiveDownloadUrlForPlayback(mNcgFilePath);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// Local Playback</span>
                mPlaybackURL = ncgLocalWebServer.addLocalFilePathForPlayback(mNcgFilePath, mNcgFileSize);
            }
        } <span class="hljs-keyword">catch</span> (Ncg2Exception e) {
            e.printStackTrace();
            Toast.makeText(MediaPlayerActivity.<span class="hljs-keyword">this</span>, 
                <span class="hljs-string">"[onCreate] Error Occured. : "</span> + e.getMessage(), Toast.LENGTH_LONG).show();
            <span class="hljs-keyword">return</span>;
        }
    }
}
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
HLS is supported in Android Media Player of more than Android 3.0.
However, playing may not be smooth depending on device.</p>
</blockquote>
<p>The following code indicates how to decrypt and use virtual URL.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">try</span> {
    mPlayer.setDataSource(mPlaybackURL);
    mPlayer.prepareAsync();
} <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
} <span class="hljs-keyword">catch</span> (IllegalStateException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
} <span class="hljs-keyword">catch</span> (IOException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
}
</div></code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="localwebserver-callback">LocalWebserver Callback</h3>
<p>Ncg2LocalWebServer internally uses Web Server in a proxy form; the information of event from this Web Server outside SDK uses WebServerListener interface.
As shown in the following codes, you can process notice or error of Ncg2LocalWebserver.
It is noted that you confirm whether onCheckPlayerStatus()method is in an applicable state of player before returning.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">private</span> Ncg2LocalWebServer.WebServerListener mWebServerCallback = <span class="hljs-keyword">new</span> Ncg2LocalWebServer.WebServerListener(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNotification</span><span class="hljs-params">(<span class="hljs-keyword">int</span> notificationCode)</span> </span>{
        <span class="hljs-comment">//Most of notice codes should be ignored.</span>
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(<span class="hljs-keyword">int</span> errorCode, String errorMessage)</span> </span>{
        <span class="hljs-comment">//Show the applicable user error message.</span>
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> PlayerState <span class="hljs-title">onCheckPlayerStatus</span><span class="hljs-params">(String uri)</span> </span>{
        <span class="hljs-keyword">if</span> (mIsPrepared) {
            <span class="hljs-comment">//Only when player can play, return</span>
            PlayerState.ReadyToPlay.
            <span class="hljs-keyword">return</span> PlayerState.ReadyToPlay;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Block playing when PlayerState.Fail is returned.</span>
            <span class="hljs-keyword">return</span> PlayerState.Fail;
        }
    }
};
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
In order to prevent the case where a hacker accesses via virtual URL to download data, check the state of Player.
When accessed via virtual URL but not under playing, it is to block decrypting.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="file-decryption">File Decryption</h3>
<p>PallyCon Android SDK provides the function to also decrypt ordinary NCG files.
NcgFile object is returned from Ncg2Agent to proceed the order from open to read.
The following is the function to be provided for NcgFile:</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Ncg2Agent</span></span>{
    <span class="hljs-comment">//Return NcgFile object.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> NcgFile <span class="hljs-title">createNcgFile</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">NcgFile</span></span>{
        <span class="hljs-comment">//Open NCG file.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">open</span><span class="hljs-params">(String path)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2InvalidNcgFileException, Ncg2Exception</span>;
        <span class="hljs-comment">//Set license and open NCG file.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">open</span><span class="hljs-params">(String path, <span class="hljs-keyword">boolean</span> prepare)</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2InvalidNcgFileException, Ncg2Exception</span>;
        <span class="hljs-comment">//Call the applicable method in a status after open and make it a status to enable decrypting. </span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">prepare</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2InvalidLicenseException, Ncg2InvalidNcgFileException, Ncg2Exception</span>;
        <span class="hljs-comment">//Close the opened file.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span></span>;
        <span class="hljs-comment">//Read content data from NCG file.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-keyword">byte</span>[] buff, <span class="hljs-keyword">long</span> sizeToRead)</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;
        <span class="hljs-comment">//Move the location of file pointer to read.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seek</span><span class="hljs-params">(<span class="hljs-keyword">long</span> offset, SeekMethod seekMethod)</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;
        <span class="hljs-comment">//Return the current location of file pointer.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getCurrentFilePointer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;
        <span class="hljs-comment">//Return the size of NCG file header.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getHeaderSize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;
        <span class="hljs-comment">//Return InputStream for NCG file.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> InputStream <span class="hljs-title">getInputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Ncg2Exception</span>;
    }
}

</div></code></pre>
<p>The following is a sample code to make original content using NcgFile object.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">try</span> {
    String ncgFilePath = mFilePath;
    ncgFile = DemoLibrary.getNcgAgent().createNcgFile();
    ncgFile.open(ncgFilePath);
    ncgFile.seek(<span class="hljs-number">0</span>, SeekMethod.End);

    <span class="hljs-comment">// the original file's size will be used for checking success of decryption.</span>
    <span class="hljs-keyword">long</span> contentFileSize = ncgFile.getCurrentFilePointer();
    ncgFile.seek(<span class="hljs-number">0</span>, SeekMethod.Begin);
    <span class="hljs-keyword">int</span> pos = mFilePath.lastIndexOf(<span class="hljs-string">"/"</span>);

    <span class="hljs-comment">// removes ".ncg" in the path of NCG file</span>
    String unpackFilePath = ncgFilePath.substring(<span class="hljs-number">0</span>, pos+<span class="hljs-number">1</span>) + <span class="hljs-string">"unpackFile.mp4"</span>;
    fileOutStream = <span class="hljs-keyword">new</span> BufferedOutputStream(<span class="hljs-keyword">new</span> FileOutputStream(unpackFilePath));
    <span class="hljs-keyword">long</span> totalReadBytes = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>( <span class="hljs-keyword">true</span> ) {
        <span class="hljs-keyword">long</span> readBytes = ncgFile.read(buffer, <span class="hljs-number">1024</span>);
        <span class="hljs-keyword">if</span>( readBytes &lt;= <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">break</span>;
        }
        fileOutStream.write(buffer, <span class="hljs-number">0</span>, (<span class="hljs-keyword">int</span>)readBytes);
        totalReadBytes += readBytes;
    }
    <span class="hljs-keyword">if</span>( totalReadBytes == contentFileSize ) {
        Log.d(DemoLibrary.TAG, <span class="hljs-string">"Decryption succeeded"</span>);
    } <span class="hljs-keyword">else</span> {
        Log.d(DemoLibrary.TAG, <span class="hljs-string">"Decryption failed"</span>);
        Toast.makeText(mainActivity, <span class="hljs-string">"[unpackNcgFiles] decryption failed"</span>, Toast.LENGTH_LONG).show();
    }
} <span class="hljs-keyword">catch</span> (Ncg2Exception e) {
    ...
}
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
If making a file after decrypting, there is a risk to expose original file.
Thus, it is recommended to decrypt and use it only in memory.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="5-release">5. Release</h2>
<p>After Ncg2Agent object ends its use, release() method should be called for release.
release() method should be called at a time to end App (i.e., when a user explicitly ends App).
Sample App generates dialog in OnBackPressed() method to call release() method.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">case</span> DIALOG_EXIT :
    builder.setMessage( getString( R.string.confirm_end ));
    builder.setPositiveButton( getString( R.string.yes ), <span class="hljs-keyword">new</span> DialogInterface.OnClickListener() {
        <span class="hljs-meta">@Override</span> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(DialogInterface dialog, <span class="hljs-keyword">int</span> which)</span> </span>{
            ...
            finish();
            DemoLibrary.getNcgAgent().release();
        }
    });
    builder.setNegativeButton( R.string.no, <span class="hljs-keyword">null</span> );
    dialog = builder.create();
    <span class="hljs-keyword">break</span>;
</div></code></pre>
<blockquote>
<p><strong>NOTE</strong>
There is a case to call Ncg2Agent.release method in onTerminate method of Application; however, onTerminate method is not often explicitly called so that it is not desirable to call Ncg2Agent.release method in onTerminate.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="6-error-processing">6. Error Processing</h2>
<p>A mechanism to process errors in PallyCon Android SDK is implemented through Exception.</p>
<p>There is Ncg2Exception class which is a basic exception class; and then there exist a variety of separate exception classes which inherit the aforesaid class.
NcgException class is a basic exception class of PallyCon SDK, which has internally as its member, ErrorCode and Error Message.
If ErrorCode is set, ErrorCode can be confirmed with getErrorCode() method; if ErrorCode is not set, -1 is returned.
Error Message can be confirmed with getMessage() method.
The following is an example code to catch Ncg2Exception exception when calling for the case to use setDataSource() method of Ncg2Player.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">try</span> {
    mPlayer.setDataSource(mNcgFilePath, mNcgFileSize);
    mPlayer.prepareAsync();
} <span class="hljs-keyword">catch</span> (Ncg2Exception e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
} <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
} <span class="hljs-keyword">catch</span> (IllegalStateException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
} <span class="hljs-keyword">catch</span> (IOException e) {
    e.printStackTrace();
    errorMsg = e.getMessage();
}
</div></code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>

</body>
</html>
  </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
