<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCG SDK for Android: Basic implementation Guides</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_inka.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">NCG SDK for Android<span id="projectnumber">&#160;Build 20221115</span>
   </div>
   <div id="projectbrief">INKA Entworks NCG DRM Library for Android</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('implementation_basic_guides.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Basic implementation Guides </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PallyCon_implematation_Guide_Android_KOR.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="a-namedoc_topapallycon-android-sdk-적용-가이드"><a></a>PallyCon Android SDK 적용 가이드</h1>
<h2 id="개발-환경-설정">1. 개발 환경 설정</h2>
<blockquote>
<p><strong>NOTE</strong><br>
본 문서는 아래와 같은 환경을 기준으로 작성되었다.</p>
</blockquote>
<p>PallyCon Android SDK는 jar 파일과 so로 구성되어 있으므로 별도의 설치가 필요 없고,<br>
해당 파일들을 SDK가 적용될 Application 프로젝트의 라이브러리폴더(libs)에 적절히 복사해 넣어주면 된다.<br>
데모 프로젝트에서 처럼 PallyCon Android SDK를 별도의 프로젝트에 적용하기 위해 아래와 같은 단계를 통해 프로젝트를 설정할 수 있다.</p>
<ol>
<li>
<p>so 파일들은 libs/armeabi 폴더에 복사해 넣는다.</p>
</li>
<li>
<p>ncg2sdk.jar파일을 libs 폴더에 복사해 넣는다. (sqlcipher.jar 파일도 libs 폴더에 넣는다)</p>
</li>
<li>
<p>아래 그림과 같이 “Java Build Path” 에 ncg2sdk.jar파일을 추가해줘야 한다.</p>
</li>
</ol>
<p><img src="build_setting.png" width="700" height="450"></p>
<ol start="4">
<li>또한 아래그림과 같이 “Order and Export” 탭에서 ncg2sdk.jar를 체크해준다.</li>
</ol>
<p><img src="build_setting_check.png" width="700" height="450"></p>
<blockquote>
<p><strong>NOTE</strong><br>
프로젝트 내 libs 폴더안에 또 다른 폴더를 생성하여 jar파일을 관리하는 경우에는 App 실행시 FATAL 에러가 발생할 가능성이 있다.<br>
이러한 경우에는 “Order and Export” 탭에서 ncg2sdk.jar를 체크해준다.</p>
</blockquote>
<hr>
<h3 id="androidmanifest.xml-권한-설정">AndroidManifest.xml 권한 설정</h3>
<p>PallyCon Android SDK를 정상적으로 사용하려면 기본적으로 요구되는 권한은 다음과 같다.</p>

<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ_LOGS</td>
<td>LOG를 읽을 수 있는 권한</td>
</tr>
<tr>
<td>INTERNET</td>
<td>네트워크 사용 권한</td>
</tr>
<tr>
<td>WRITE_EXTERNAL_STORAGE</td>
<td>외부 storage를 쓸 수 있는 권한</td>
</tr>
<tr>
<td>READ_PHONE_STATE</td>
<td>기기의 상태를 읽을 수 있는 권한</td>
</tr>
<tr>
<td>MOUNT_UNMOUNT_FILESYSTEMS</td>
<td>파일 시스템 편집 권한</td>
</tr>
</tbody>
</table><p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="초기화">2. 초기화</h2>
<p>Core객체는 싱글톤으로 APP이 구동되는 동안 하나의 객체만이 생성된다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoLibrary</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">static</span> Ncg2Agent g_ncgAgent <span class="token operator">=</span> Ncg2SdkFactory<span class="token punctuation">.</span><span class="token function">getNcgAgentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> Ncg2Agent <span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> g_ncgAgent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Ncg2Agent 객체를 사용하기 위해서는 init() 메소드를 통한 초기화 작업을 수행하여야 한다.<br>
일반적으로 Ncg2Agent의 init() 메소드는 앱이 시작되는 시점( android.app.Application의 onCreate )에서 호출하여 준다.<br>
Ncg2Agent 객체가 초기화 되지 않았거나, 이미 릴리즈 된 상태에서 내부 메소드들이 호출되면 오류가 발생되므로 주의해야 한다.</p>

<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>NotSupportOffline</td>
<td>오프라인시 지원안함</td>
</tr>
<tr>
<td>OfflineSupport</td>
<td>오프라인시 지원함</td>
</tr>
</tbody>
</table><p>오프라인 지원정책을 ‘OfflineSupport’ 로 설정하는 경우 오프라인에서 연속으로 실행되는 횟수를 제한할 수 있는 방법을 제공한다.  기본으로 셋팅된 실행제한횟수는 10이며 이 값은 OfflineSupportPolicy enum 클래스의 setCountOfExecutionLimit 메소드를 통해 설정이 가능하다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initializeNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">initializeNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHttpRequestCallback</span><span class="token punctuation">(</span>mHttpRequestCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Ncg2Agent<span class="token punctuation">.</span>OfflineSupportPolicy policy <span class="token operator">=</span> Ncg2Agent<span class="token punctuation">.</span>OfflineSupportPolicy<span class="token punctuation">.</span>OfflineSupport<span class="token punctuation">;</span>
            policy<span class="token punctuation">.</span><span class="token function">setCountOfExecutionLimit</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enableLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Ncg2Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String errorMsg <span class="token operator">=</span> <span class="token string">"Exception in init() : "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>DemoLibrary<span class="token punctuation">.</span>TAG<span class="token punctuation">,</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>PallyCon Android SDK 내부에서 HTTP 통신 제어를 위해서는 앱에서 HttpRequestCallback을 구현하여 초기화 이후 Callback을 설정하면 된다.<br>
HttpRequestCallback 콜백 객체를 설정해주기 위해서 Ncg2Agent.setHttpRequestCallback 메소드가 사용된다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> Ncg2Agent<span class="token punctuation">.</span>HttpRequestCallback mHttpRequestCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ncg2Agent<span class="token punctuation">.</span>HttpRequestCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> String <span class="token function">sendRequest</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String param<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">sendRequestResponseBytes</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String param<span class="token punctuation">)</span> <span class="token keyword">throws</span> NcgHttpRequestException <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span>String url<span class="token punctuation">,</span> String param<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token keyword">throws</span> NcgHttpRequestException <span class="token punctuation">{</span>    
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initializeNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHttpRequestCallback</span><span class="token punctuation">(</span>mHttpRequestCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="라이선스">3.라이선스</h2>
<h3 id="라이선스-확인">라이선스 확인</h3>
<p>DRM이 적용된 콘텐츠를 사용하기 위해서는 반드시 라이선스를 발급 받아야 한다.<br>
라이선스 파일은 유효 기간, 재생 횟수, TV-out 허용 여부 등 콘텐츠의 권한이 포함되어 있다.<br>
따라서 콘텐츠를 재생시키기 위해서는 라이선스 서버로부터 발급 받아야하며, 라이선스가 없거나 유효하지 않으면 DRM 콘텐츠 사용이 제한된다.<br>
라이선스 확인을 위해 PallyCon Android SDK에서 제공하는 함수는 다음과 같다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">interface</span> <span class="token class-name">Ncg2Agent</span><span class="token punctuation">{</span>
    <span class="token comment">// 입력된 경로 및 URL에 위치한 파일이 NCG 파일 인지를 확인한다. </span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isNcgContent</span><span class="token punctuation">(</span>String strFileOrURL<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception
    
    <span class="token comment">// 입력된 경로 및 URL에 위치한 파일의 라이선스가 유효한지 확인한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isLicenseValid</span><span class="token punctuation">(</span>String strFileOrURL<span class="token punctuation">)</span> <span class="token keyword">throw</span> Ncg2Exception
    
    <span class="token comment">// 콘텐츠의 라이선스 유효성을 확인한다.</span>
    <span class="token keyword">public</span> LicenseValidation <span class="token function">checkLicenseValid</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception
<span class="token punctuation">}</span>
</code></pre>
<p>checkLicenseValid 메소드에서 반환되는 LicenseValidation enum타입의 다음과 같다.</p>

<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ValidLicense</td>
<td>유효한 라이선스</td>
</tr>
<tr>
<td>NotExistLicense</td>
<td>라이선스가 없거나 유효하지 않음</td>
</tr>
<tr>
<td>ExternalDeviceDisallowed</td>
<td>외부출력 장치가 금지된 라이선스</td>
</tr>
<tr>
<td>RootedDeviceDisallowed</td>
<td>루팅된 단말에서 금지된 라이선스</td>
</tr>
<tr>
<td>ExpiredLicense</td>
<td>기간이 만료된 라이선스</td>
</tr>
<tr>
<td>ExceededPlayCount</td>
<td>횟수가 만료된 라이선스</td>
</tr>
<tr>
<td>DeviceTimeModified</td>
<td>디바이스 시간이 변경된 것을 감지한 경우</td>
</tr>
<tr>
<td>OfflineNotSupported</td>
<td>오프라인환경을 지원하지 않는 정책으로 초기화를 시도하는 과정에서 서버와 접속이 실패되어 오프라인으로 감지된 경우</td>
</tr>
<tr>
<td>OfflineStatusTooLong</td>
<td>오프라인으로 실행된 경우가 너무 많아서 온라인이 필요한 상태. 자세한 내용은 아래 노트에서 확인</td>
</tr>
<tr>
<td>NotAuthorizedAppID</td>
<td>실행되고 있는 App이 서버에서 인증되지 않은 App이므로 초기화가 실패된 경우</td>
</tr>
<tr>
<td>ScreenRecorderDetected</td>
<td>스크린 레코더 앱이 감지가 된 경우</td>
</tr>
</tbody>
</table><p>Sample Project에서는 아래와 같은 순서로 라이선스의 유효성을 확인한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">if</span><span class="token punctuation">(</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isNcgContent</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Ncg2Agent<span class="token punctuation">.</span>LicenseValidation validation <span class="token operator">=</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkLicenseValid</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span> validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ValidLicense <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 라이선스 유효 처리 루틴</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>NotExistLicense <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 라이선스가 없거나 유효하지 않음</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">// 라이선스 서버에 라이선스 요청</span>
    DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">acquireLicenseByPath</span><span class="token punctuation">(</span> path<span class="token punctuation">,</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getUserID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getOrderID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkLicenseValid</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ValidLicense <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 서버에서 유효한 라이선스를 받음</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 서버에서 라이선스를 받지 못함</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ExternalDeviceDisallowed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// HDMI 장치같은 External Device가 연결되어서 재생을 허용하지 않을 경우</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>RootedDeviceDisallowed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Rooting 단말에서 허용되지 않는 라이선스인 경우.</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ExpiredLicense<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 라이선스가 기간이 만료된 경우</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ExceededPlayCount<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 횟수제 라이선스의 경우 횟수가 만료된 경우</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>validation <span class="token operator">==</span> LicenseValidation<span class="token punctuation">.</span>ScreenRecorderDetected <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 스크린레코더 앱이 감지된 경우 앱 이름과 패키지 이름을 </span>
    <span class="token comment">// 아래 코드처럼 확인할 수 있다</span>
    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">&gt;</span> data <span class="token operator">=</span> validation<span class="token punctuation">.</span><span class="token function">getExtraData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String appName <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"AppName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String packageName <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"AppPackageName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
사용자가 고의적으로 디바이스 시간을 바꾸는 경우를 검출하기 위해,<br>
무제한 라이선스를 제외한 나머지 종류의 라이선스 타입에서는 내부적으로 오프라인상태로 실행된 경우가  setCountOfExecutionLimit 메소드에 의해 명시적으로 지정된 값 이상이 되면 OfflineStatusTooLong 값이 반환된다.<br>
OfflineStatusTooLong  값은 init() 메소드호출시 오프라인지원(OfflineSupport 파라미터)옵션으로 설정된 경우에만 동작된다.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="라이선스-발급-및-갱신">라이선스 발급 및 갱신</h3>
<p>라이선스가 없거나 기간이 만료되었을 경우에 해당 콘텐츠에 대한 라이선스를 발급받아야 한다.<br>
라이선스를 발급받는 시점은 실제 사용 전 아무 때나 가능하지만 SDK Sample App Project에서는 재생 시점에 라이선스 발급을 시도한다. 라이선스 발급 시점은 개발하는 App 시나리오에 따라 달라지겠지만, 일반적으로 발급 시점은 재생 시점에 라이선스를 요청한다.<br>
라이선스 발급을 위해 PallyCon Android SDK에서 지원하는 함수는 다음과 같다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">interface</span> <span class="token class-name">Ncg2Agent</span> <span class="token punctuation">{</span>
    <span class="token comment">// 입력된 경로와 UserID, OrderID로 라이선스를 획득한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">acquireLicenseByPath</span><span class="token punctuation">(</span>String path<span class="token punctuation">,</span> String userId<span class="token punctuation">,</span> String orderId<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception
    
    <span class="token comment">// 입력된 경로와 UserID, OrderID로 라이선스를 획득하며, temporary를 설정하여 일회용 라이선스 획득이 가능하다.</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">acquireLicenseByPath</span><span class="token punctuation">(</span> String path<span class="token punctuation">,</span> String userID<span class="token punctuation">,</span> String orderID<span class="token punctuation">,</span> <span class="token keyword">boolean</span> temporary <span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
    
    <span class="token comment">// Content ID를 이용하여 라이선스를 획득한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">acquireLicenseByCID</span><span class="token punctuation">(</span>String cid<span class="token punctuation">,</span> String userID<span class="token punctuation">,</span> String orderID<span class="token punctuation">,</span> String acquisitionURL<span class="token punctuation">)</span> <span class="token keyword">throw</span> Ncg2Exception

    <span class="token comment">// Content ID를 이용하여 라이선스를 획득한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">acquireLicenseByCID</span><span class="token punctuation">(</span>String cid<span class="token punctuation">,</span> String userID<span class="token punctuation">,</span> String siteID<span class="token punctuation">,</span> String orderID<span class="token punctuation">,</span> String acquisitionURL<span class="token punctuation">)</span> <span class="token keyword">throw</span> Ncg2Exception
    
    <span class="token comment">// Content ID를 이용하여 라이선스를 획득하며, temporary를 설정하여 일회용 라이선스 획득이 가능하다.</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">acquireLicenseByCID</span><span class="token punctuation">(</span>String cid<span class="token punctuation">,</span> String userID<span class="token punctuation">,</span> String siteID<span class="token punctuation">,</span> String orderID<span class="token punctuation">,</span> String acquisitionURL<span class="token punctuation">,</span> <span class="token keyword">boolean</span> temporary <span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>기간제 라이선스와 달리 횟수제 라이선스는 라이선스 정보에서 확인을 해야한다.<br>
만약 횟수제 라이선스인 경우에는 횟수를 차감하는 함수를 PallyCon Android SDK에서 제공하고 있으며, 횟수를 차감하는 시점은 라이선스 발급과 가상 URL 반환이 완료된 시점에서 해줘야 한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">private</span> OnPreparedListener mPreparedListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OnPreparedListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPrepared</span><span class="token punctuation">(</span>MediaPlayer mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> mIsCountLimitedContent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decreasePlayCount</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
원격지 콘텐츠(PD/HLS)의 경우 네트워크 환경이 불안정한 경우 라이선스 발급 및 콘텐츠 재생이 원활하지 않을 수 있다.<br>
콘텐츠를 재생할때마다 라이선스 발급을 하고 싶다면, 일회용 라이선스로 획득하는 것이 바람직하다.<br>
Downloaded Contents의 경우 라이선스 발급이 되었다면 네트워크이 안되는 환경에서 재생이 가능하다. 따라서 콘텐츠가 다운로드가 완료되는 시점(네트워크가 연결되어 있는)에 라이선스 발급하는 것이 바람직하다.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="라이선스-삭제">라이선스 삭제</h3>
<p>APP 시나리오에 따라 이미 발급된 라이선스를 폐기해야 할 필요가 있을 수 있다. 이런 경우에 사용할 수 있는 라이선스 삭제 관련 함수는 다음과 같으며, 시나리오에 맞게 사용하면 된다. 일회용 라이선스를 폐기하는 시점은 실제 사용 후 아무때나 가능하지만 SDK Sample App Project에서는 재생종료 시점에 라이선스 폐기를 시도한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">interface</span> <span class="token class-name">Ncg2Agent</span><span class="token punctuation">{</span>
    <span class="token comment">// 발급받은 라이선스의 모든 CID를 통해 라이선스를 삭제한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeLicenseAllCID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception

    <span class="token comment">// 발급받은 모든 일회용 라이선스를 삭제한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">removeAllTemporaryLicense</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception

    <span class="token comment">// CID를 통해 라이선스를 삭제한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeLicenseByCID</span><span class="token punctuation">(</span>strContentsID<span class="token punctuation">)</span> <span class="token keyword">throw</span> Ncg2Exception

    <span class="token comment">// 파일 경로에 있는 콘텐츠의 라이선스를 삭제한다.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeLicenseByPath</span><span class="token punctuation">(</span>strFilename<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception
<span class="token punctuation">}</span>
</code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="재생">4. 재생</h2>
<p>PallyCon Android SDK를 이용하여 라이선스까지 정상적으로 발급을 받았다면, Ncg2LocalWebServer 인터페이스를 이용하여 내부에 있는 LocalWebserver를 컨트롤 할 수 있다.<br>
PallyCon 콘텐츠를 재생할 수 있도록 PallyCon 콘텐츠의 경로를 지정하면 가상 URL를 반환해주는 형태로 이용된다.<br>
가상 URL을 획득한 이 후 Android에서 제공하는 MediaPlayer 혹은 3th Party Player로 접속하여 재생하면 된다.<br>
아래는 Ncg2LocalWebServer 에서 제공하는 가상 URL 반환 함수이다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">interface</span> <span class="token class-name">Ncg2LocalWebServer</span><span class="token punctuation">{</span>
    <span class="token comment">// Local File의 경우</span>
    <span class="token keyword">public</span> String <span class="token function">addLocalFilePathForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> <span class="token keyword">long</span> fileSize<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// PD 콘텐츠의 경우</span>
    <span class="token keyword">public</span> String <span class="token function">addProgressiveDownloadUrlForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// HLS의 경우</span>
    <span class="token keyword">public</span> String <span class="token function">addHttpLiveStreamUrlForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// HLS (live)의 경우</span>
    <span class="token keyword">public</span> String <span class="token function">addHttpLiveStreamUrlForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isLiveHLS<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// HLS의 경우</span>
    <span class="token comment">// addHttpLiveStreamUrlForPlayback()와는 다르게 m3u8 경로에 해당되는 key파일을 미리 체크하지 않는다. </span>
    <span class="token comment">// 라이선스를 미리 체크하지 않으므로 HLS 키파일의 라이선스는 반드시 유효해야 한다. 그렇지 않다면 재생오류가 발생될 것이다.</span>
    <span class="token keyword">public</span> String <span class="token function">addHttpLiveStreamUrlForPlaybackWithoutChecking</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// HLS의 경우</span>
    <span class="token comment">// CID와 SiteID를 직접 넣어서 라이선스는 검증하되 m3u8 파일와 key 파일에 접근하지 않도록 처리한다.</span>
    <span class="token keyword">public</span> String <span class="token function">addHttpLiveStreamUrlForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> String cid<span class="token punctuation">,</span> String siteID<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>

    <span class="token comment">// HLS (live)의 경우</span>
    <span class="token comment">// CID와 SiteID, Live 유무를 직접 넣어서 라이선스는 검증하되 m3u8 파일와 key 파일에 접근하지 않도록 처리한다.</span>
    <span class="token keyword">public</span> String <span class="token function">addHttpLiveStreamUrlForPlayback</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> String url<span class="token punctuation">,</span> String cid<span class="token punctuation">,</span> String siteID<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isLiveHLS<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>아래 코드를 통해 PallyCon 콘텐츠로부터 가상 URL를 어떻게 얻을 수 있는지 확인할 수 있다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PlayerActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Ncg2Agent ncgAgent <span class="token operator">=</span> Ncg2SdkFactory<span class="token punctuation">.</span><span class="token function">getNcgAgentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Ncg2LocalWebServer ncgLocalWebServer <span class="token operator">=</span> ncgAgent<span class="token punctuation">.</span><span class="token function">getLocalWebServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ncgLocalWebServer<span class="token punctuation">.</span><span class="token function">setWebServerListener</span><span class="token punctuation">(</span>mWebServerCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ncgLocalWebServer<span class="token punctuation">.</span><span class="token function">clearPlaybackUrls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> mNcgFilePath<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">".m3u8"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// HLS Playback</span>
                mPlaybackURL <span class="token operator">=</span> ncgLocalWebServer<span class="token punctuation">.</span><span class="token function">addHttpLiveStreamUrlForPlayback</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"http://"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// PD Playback</span>
                mPlaybackURL <span class="token operator">=</span> ncgLocalWebServer<span class="token punctuation">.</span><span class="token function">addProgressiveDownloadUrlForPlayback</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// Local Playback</span>
                mPlaybackURL <span class="token operator">=</span> ncgLocalWebServer<span class="token punctuation">.</span><span class="token function">addLocalFilePathForPlayback</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">,</span> mNcgFileSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Ncg2Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>MediaPlayerActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> 
                    <span class="token string">"[onCreate] Error Occured. : "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
Android 3.0 이상부터 Android Media Player에서 HLS를 지원한다.<br>
그러나 기기에 따라 재생이 원활하지 않은 경우도 있다.</p>
</blockquote>
<p>아래 코드를 통해 어떻게 가상 URL를 복호화하고 이용할 수 있는지 확인할 수 있다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
    mPlayer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>mPlaybackURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mPlayer<span class="token punctuation">.</span><span class="token function">prepareAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalStateException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><a href="#doc_top"><i class="icon-list"></i> Top</a></p>
<hr>
<h3 id="localwebserver-callback">LocalWebserver Callback</h3>
<p>Ncg2LocalWebServer는 내부적으로 프록시형태의 Web Server를 이용하게 되는데 이 Web Server에서 SDK 외부로 이벤트를 알리기 위해 WebServerListener 인터페이스를 이용한다.<br>
아래 코드에서 확인할 수 있듯이 Ncg2LocalWebServer의 통지나 오류에 대하여 처리할 수 있다.<br>
주의할 것은 onCheckPlayerStatus()메소드는 적절한 플레이어의 상태를 확인하여 반환해줘야 한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">private</span> Ncg2LocalWebServer<span class="token punctuation">.</span>WebServerListener mWebServerCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ncg2LocalWebServer<span class="token punctuation">.</span>WebServerListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNotification</span><span class="token punctuation">(</span><span class="token keyword">int</span> notificationCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//통지코드는 대부분 무시되어야 된다.</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token keyword">int</span> errorCode<span class="token punctuation">,</span> String errorMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//적절한 사용자 오류 메시지를 보여줘야 한다.</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> PlayerState <span class="token function">onCheckPlayerStatus</span><span class="token punctuation">(</span>String uri<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mIsPrepared<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//플레이어가 재생이 가능할때만 PlayerState.ReadyToPlay를 반환해야 한다.</span>
            <span class="token keyword">return</span> PlayerState<span class="token punctuation">.</span>ReadyToPlay<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// PlayerState.Fail이 반환된 경우에는 재생이 차단되어 진다.</span>
            <span class="token keyword">return</span> PlayerState<span class="token punctuation">.</span>Fail<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
해커가 가상 URL로 접속하여 데이터를 다운로드 받는 경우를 막기 위해 Player의 상태를 체크한다.<br>
가상 URL로 접속은 했지만 실제로 재생 중이 아닐때는 복호화를 차단하기 위함이다.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h3 id="파일-복호화">파일 복호화</h3>
<p>PallyCon Android SDK에서는 일반 NCG 파일도 복호화 할 수 있는 기능을 제공하고 있다.<br>
Ncg2Agent에서 NcgFile 객체를 반환 받은 후 open-&gt;read 순으로 진행을 하면 된다.<br>
아래는 NcgFile에 대해 제공해주는 함수이다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">interface</span> <span class="token class-name">Ncg2Agent</span><span class="token punctuation">{</span>
    <span class="token comment">//NcgFile객체를 반환한다.</span>
    <span class="token keyword">public</span> NcgFile <span class="token function">createNcgFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">interface</span> <span class="token class-name">NcgFile</span><span class="token punctuation">{</span>
        <span class="token comment">//NCG 파일을 Open한다.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2InvalidNcgFileException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//라이선스를 셋팅 후 NCG파일을 Open한다.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span>String path<span class="token punctuation">,</span> <span class="token keyword">boolean</span> prepare<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2InvalidNcgFileException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//open 이후 상태에서 해당 메소드를 호출하여 복호화가 가능한 상태로 만든다. </span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2InvalidLicenseException<span class="token punctuation">,</span> Ncg2InvalidNcgFileException<span class="token punctuation">,</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//Open 된 파일을 닫아준다.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//NCG 파일로부터 콘텐츠데이터를 읽어들인다.</span>
        <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff<span class="token punctuation">,</span> <span class="token keyword">long</span> sizeToRead<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//읽어들일 파일포인터의 위치를 이동시킨다.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">seek</span><span class="token punctuation">(</span><span class="token keyword">long</span> offset<span class="token punctuation">,</span> SeekMethod seekMethod<span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//현재의 파일포인터 위치를 반환한다.</span>
        <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getCurrentFilePointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//NCG 파일의 헤더 크기를 반환한다.</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getHeaderSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
        <span class="token comment">//NCG 파일용 InputStream을 반환한다.</span>
        <span class="token keyword">public</span> InputStream <span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Ncg2Exception<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>아래는 NcgFile 객체를 이용하여 원본 콘텐츠로 만드는 샘플 코드이다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
    String ncgFilePath <span class="token operator">=</span> mFilePath<span class="token punctuation">;</span>
    ncgFile <span class="token operator">=</span> DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createNcgFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ncgFile<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>ncgFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ncgFile<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> SeekMethod<span class="token punctuation">.</span>End<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// the original file's size will be used for checking success of decryption.</span>
    <span class="token keyword">long</span> contentFileSize <span class="token operator">=</span> ncgFile<span class="token punctuation">.</span><span class="token function">getCurrentFilePointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ncgFile<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> SeekMethod<span class="token punctuation">.</span>Begin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> pos <span class="token operator">=</span> mFilePath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// removes ".ncg" in the path of NCG file</span>
    String unpackFilePath <span class="token operator">=</span> ncgFilePath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"unpackFile.mp4"</span><span class="token punctuation">;</span>
    fileOutStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>unpackFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> totalReadBytes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> readBytes <span class="token operator">=</span> ncgFile<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> readBytes <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        fileOutStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>readBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        totalReadBytes <span class="token operator">+=</span> readBytes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> totalReadBytes <span class="token operator">==</span> contentFileSize <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>DemoLibrary<span class="token punctuation">.</span>TAG<span class="token punctuation">,</span> <span class="token string">"Decryption succeeded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>DemoLibrary<span class="token punctuation">.</span>TAG<span class="token punctuation">,</span> <span class="token string">"Decryption failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mainActivity<span class="token punctuation">,</span> <span class="token string">"[unpackNcgFiles] decryption failed"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Ncg2Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
복호화 후 파일로 만들면 원본파일 노출 등의 위험이 있다.<br>
그러므로 메모리상에서만 복호화하여 사용하는 것을 권고한다.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="릴리즈">5. 릴리즈</h2>
<p>Ncg2Agent 객체의 사용이 모두 끝나면 release() 메소드를 호출하여 릴리즈를 시켜줘야 한다.<br>
release() 메소드는 앱이 종료되는 시점(즉, 명시적으로 사용자가 종료한 경우)에서 호출한다.<br>
Sample App에서는 OnBackPressed() 메소드에서 다이얼로그를 생성하여 release() 메소드를 호출한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">case</span> DIALOG_EXIT <span class="token operator">:</span>
    builder<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span> <span class="token function">getString</span><span class="token punctuation">(</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>confirm_end <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    builder<span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span> <span class="token function">getString</span><span class="token punctuation">(</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>yes <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>DialogInterface dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            DemoLibrary<span class="token punctuation">.</span><span class="token function">getNcgAgent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    builder<span class="token punctuation">.</span><span class="token function">setNegativeButton</span><span class="token punctuation">(</span> R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>no<span class="token punctuation">,</span> null <span class="token punctuation">)</span><span class="token punctuation">;</span>
    dialog <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span> 
</code></pre>
<blockquote>
<p><strong>NOTE</strong><br>
Application의 onTerminate메소드에서 Ncg2Agent.release메소드를 호출하는 경우도 있으나 onTerminate 메소드는 명시적으로 호출되지 않는 경우가 많기 때문에 onTerminate에서 Ncg2Agent.release 메소드를 호출하는 것은 적절하지 않다.</p>
</blockquote>
<p><a href="#doc_top">Top</a></p>
<hr>
<h2 id="오류처리">6. 오류처리</h2>
<p>PallyCon Android SDK의 오류처리 메커니즘은 예외(Exception)을 통해 구현된다.</p>
<p>기본 class의 Exception인 Ncg2Exception 클래스가 있으며 해당 클래스를 상속받고 있는 별도의 여러 예외 클래스들이 존재한다.<br>
Ncg2Exception  클래스는 PallyCon SDK의 기본 예외클래스로서 내부적으로 ErrorCode 및 Error Message를 멤버로 갖고 있다.<br>
에러코드가 설정된 경우 getErrorCode() 메소드를 통해 에러코드를 확인할 수 있으며 에러코드가 설정되지 않은 경우에는 -1이 반환된다.<br>
Error Message는 getMessage()메소드를 통해 확인할 수 있다.<br>
아래는 Ncg2Player의 setDataSource() 메소드를 이용하는 경우에 대한 호출시 Ncg2Exception예외를 catch하는 예제코드이다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
    mPlayer<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>mNcgFilePath<span class="token punctuation">,</span> mNcgFileSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mPlayer<span class="token punctuation">.</span><span class="token function">prepareAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Ncg2Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalStateException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMsg <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="기타">7. 기타</h2>
<h3 id="에뮬레이터-동작-테스트">에뮬레이터 동작 테스트</h3>
<p>앱 개발시에 에뮬레이터 환경에서만 개발이 가능한 사용자를 위한 API 로 실제 앱 배포시엔 제거 또는 'disableVirtualMachine()'를 호출해야 한다.</p>
<pre class=" language-java"><code class="prism  language-java"><span class="token comment">//허용</span>
Ncg2Agent ncgAgent <span class="token operator">=</span> Ncg2SdkFactory<span class="token punctuation">.</span><span class="token function">getNcgAgentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ncgAgent<span class="token punctuation">.</span><span class="token function">enableVirtualMachine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//비허용</span>
ncgAgent<span class="token punctuation">.</span><span class="token function">disableVirtualMachine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><a href="#doc_top">Top</a></p>
<hr>
</div>
</body>

</html>
   </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
