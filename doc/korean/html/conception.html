<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCG SDK for Android: Conception</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_inka.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">NCG SDK for Android<span id="projectnumber">&#160;Build 20230428</span>
   </div>
   <div id="projectbrief">INKA Entworks NCG DRM Library for Android</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('conception.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Conception </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>PallyCon_Conception_Android_KOR</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
  body {
    padding: 2cm; 
  }
}
</style>


</head>

<body>

<script src="raphael-min.js"></script>
<script src="flowchart-latest.js"></script>
<script src="webfont.js"></script>
<script src="underscore-min.js"></script>
<script src="sequence-diagram-min.js"></script>

<h1 id="toc_0"><a name="doc_top"></a>PallyCon SDK Sample App Scenario</h1>

<p>Application을 기획하고, 설계, 구현할 때 PallyCon SDK에 대한 이해는 매우 중요하다. 
본 문서에서는 <strong>SDK가 DRM 컨텐츠를 어떻게 처리하는지</strong>를 Flow Chat를 통해 이해하고 이를 반영한 <strong>Sample App에서 SDK 운용 및 역활에 대한 전체적인 상호작용</strong>을 살펴봄으로써 Application 기획/설계의 오류를 예방할 수 있다. </p>

<ul>
<li><a href="#sdk-drm-processing">SDK DRM Processing</a>에서는 SDK가 DRM 컨텐츠(Downloaded Contents)를 처리하는 흐름을 설명한다.</li>
<li><a href="#sdk-sample-app-sequence">SDK Sample App Sequence</a>에서는 User, App(Application), SDK, License Server의 전체적인 상호 작용을 설명한다.</li>
</ul>

<hr>

<h2 id="toc_1">SDK DRM Processing</h2>

<p>PallyCon SDK가 DRM 컨텐츠를 어떻게 처리하는지 흐름을 알아야 구현될 Application(App)의 시나리오를 계획할 수 있다.
아래 flow chat는 SDK가 DRM 비디오 컨텐츠를 처리하는 흐름을 나타낸 것이다. 이외에 오디오, 문서, 그림 등도 유사한 흐름으로 처리된다.</p>

<p><center>
<div id="flow"></div>
<script>
  var diagram = flowchart.parse(
  &quot;st=&gt;start: Contents Select\n&quot; +
  &quot;e=&gt;end\n&quot; +
  &quot;isNCG=&gt;condition: 1. Encrypted ?\n&quot; +
  &quot;licenseExist=&gt;condition: 2. License\n&quot; +
  &quot;  Exist ?\n&quot; +
  &quot;licenseValid=&gt;condition: 3. Valid\n&quot; +
  &quot;License ?\n&quot; +
  &quot;acquire=&gt;subroutine: 4. License\n&quot; +
  &quot;Acquisition\n&quot; +
  &quot;acquireLicensecheck=&gt;condition: 5. Valid\n&quot; +
  &quot;License ?\n&quot; +
  &quot;Proxy=&gt;subroutine: 6. Local WebServer\n&quot; +
  &quot;io=&gt;inputoutput: 7. Player(Playback)\n&quot; +
  &quot;st-&gt;isNCG-&gt;licenseExist-&gt;licenseValid-&gt;Proxy-&gt;io-&gt;e\n&quot; +
  &quot;isNCG(yes)-&gt;licenseExist\n&quot; +
  &quot;isNCG(no)-&gt;io\n&quot; +
  &quot;licenseExist(yes)-&gt;licenseValid\n&quot; +
  &quot;licenseExist(no)-&gt;acquire\n&quot; +
  &quot;licenseValid(yes)-&gt;Proxy\n&quot; +
  &quot;licenseValid(no)-&gt;acquire(right)-&gt;acquireLicensecheck\n&quot; +
  &quot;acquireLicensecheck(yes)-&gt;Proxy\n&quot; +
  &quot;acquireLicensecheck(no)-&gt;e\n&quot;);
  diagram.drawSVG(&#39;flow&#39;);
</script>
</center></p>

<p>아래는 <code>Flow Chat</code>에 대한 설명이다.</p>

<blockquote>
<p>App에서 비디오 컨텐츠 재생을 시도하게 되면</p>

<ol>
<li>비디오 컨텐츠가 DRM 파일인지 아닌지를 판단해야 한다.

<ul>
<li>DRM 파일이 아닐 경우 암호화되지 않은 파일이므로 7번의 일반 재생 절차를 따른다.</li>
<li>DRM 파일일 경우 2번에서 라이선스를 가지고 있는지 찾는다.</li>
</ul></li>
<li>비디오 컨텐츠의 라이선스를 찾아보고 있다면,

<ul>
<li>라이선스가 있다면 3번 유효한 라이선스인지 확인한다.</li>
<li>라이선스가 없다면 4번 라이선스 획득(라이선스 서버로부터)을 시도한다.</li>
</ul></li>
<li>비디오 컨텐츠의 라이선스가 있다면 유효한 라이선스인지 확인한다.

<ul>
<li>유효한 라이선스라면 6번 재생 시도로 넘어간다.</li>
<li>유효한 라이선스가 아니라면 4번 라이선스 획득을 시도한다(재생을 제한해도 된다).</li>
</ul></li>
<li>라이선스 서버로 라이선스 획득을 시도한다.</li>
<li>발급 받은 라이선스가 유효한 라이선스인지 확인한다.

<ul>
<li>유효한 라이선스라면 6번 Local WebServer로 넘어간다.</li>
<li>유효한 라이선스가 아니라면 재생을 제한한다(시나리오에 따라 다를 수 있다).</li>
</ul></li>
<li>Local WebServer는 Player가 재생 가능한 DRM 컨텐츠의 가상 URL을 리턴한다.</li>
<li>Player는 정상적인 일반 파일이거나 정상적인 DRM 컨텐츠일 경우 재생한다.</li>
</ol>
</blockquote>

<p><a href="#doc_top">Top</a></p>

<hr>

<h2 id="toc_2">SDK Sample App Sequence</h2>

<p>SDK가 적용된 Sample App의 전체적인 상호 작용 및 흐름을 나타낸 시퀀스 다이그램이다. <code>User</code>가 <code>DRM 컨텐츠</code>를 사용하기 위해서는 <code>SDK(PallyCon SDK)</code>가 적용된 <code>App</code>이 있어야하며 DRM 컨텐츠의 라이선스를 발급 받을 수 있는 <code>License Server</code>가 준비되어 있어야 한다. User의 이벤트에 따라 App, SDK, License Server 의 동작을 순서대로 나타냈으며 App과 SDK를 중심으로 설명한다.
아래 설명은 DRM Contents 일 경우에 대한 흐름이다. Non-DRM File은 고려하지 않았다.</p>

<p><center>
<div id="sequence"></div>
<script>
  var diagram = Diagram.parse(
  &quot;User-&gt;App: App Excute\n&quot; +
  &quot;App-&gt;SDK: 1. init\n&quot; +
  &quot;SDK-&gt;&gt;SDK: initialize: Local Server Start\n&quot; +
  &quot;User-&gt;App: Playback or Download\n&quot; +
  &quot;App-&gt;SDK: 2. Check License of Contents\n&quot; +
  &quot;SDK--&gt;App: License Validation Return\n&quot; +
  &quot;App-&gt;SDK: 3. License Acquisition\n&quot; +
  &quot;SDK-&gt;License Server: Device info Enroll\n&quot; +
  &quot;License Server--&gt;SDK: Certification Issue\n&quot; +
  &quot;Note over SDK: Certification Save\n&quot; +
  &quot;SDK-&gt;License Server: License Acquire\n&quot; +
  &quot;License Server--&gt;SDK: License Issue\n&quot; +
  &quot;Note over SDK: License Check\n&quot; +
  &quot;App-&gt;SDK: 4. Playback URL Request\n&quot; +
  &quot;Note over SDK: Playable URL\n&quot; +
  &quot;SDK--&gt;App: 5. Virtual URL Return\n&quot; +
  &quot;App-&gt;&gt;App: Playback\n&quot; +
  &quot;App--&gt;User: Watching\n&quot; +
  &quot;User-&gt;App: App Background Entry\n&quot; +
  &quot;App-&gt;&gt;App: Play Stop\n&quot; +
  &quot;App-&gt;SDK: 6. Remove All Temporary License\n&quot; +
  &quot;App-&gt;SDK: 7. App Background Entry\n&quot; +
  &quot;User-&gt;App: App Foreground Entry\n&quot; +
  &quot;App-&gt;SDK: 8. App Foreground Entry\n&quot; +
  &quot;App-&gt;&gt;App: Playback\n&quot; +
  &quot;App--&gt;User: Watching&quot;);
  diagram.drawSVG(&quot;sequence&quot;, {theme: &#39;simple&#39;});
</script>
</center></p>

<p>아래는 <code>Sequence Diagram</code> 에 대한 설명이다.</p>

<blockquote>
<p>디바이스에 SDK가 적용된 App이 설치되어 있다면</p>

<ol>
<li>init

<ul>
<li>사용자가 App 을 실행시면 App은 PallyCon SDK의 init 함수를 통해 초기화 작업이 수행된다.</li>
<li>이때 DRM 라이선스 파일 및 인증서 파일의 유효성을 검증하고 데이터를 로딩한다.</li>
<li>초기화 시점에 Offline 지원 정책을 설정할 수 있으며 자세한 설정방법은 &#39;OfflineSupportPolicy&#39; enum class 를 통해 확인할 수 있다.</li>
<li>PallyCon SDK에 현재 시간을 내부에 세팅하며 시간값은 주기적으로 업데이트 된다.</li>
</ul></li>
<li>Check License of Contents

<ul>
<li>사용자가 컨텐츠를 재생하기전에 해당 컨텐츠의 라이선스 유효성을 검증해야한다.</li>
</ul></li>
<li>License Acquisition

<ul>
<li><strong>만약 유효한 라이선스가 존재한다면</strong> 라이선스 획득 과정은 필요하지 않다.</li>
<li>라이선스가 없는 경우 디바이스에 대한 인증을 받고 라이선스 요청 및 획득할 수 있다. </li>
<li>라이선스 획득은 <code>aquireLicenseByPath</code>, CID를 아는 경우에는 <code>aquireLicenseByCID</code>를 호출하여 획득할 수 있으며,  HTTP Request하여 라이선스 서버로 보내고 HTTP Response 를 해석하여 라이선스를 저장한다.  <strong>만약 일회용 라이선스가 필요하다면</strong> temporary 파라매터를 이용하여 획득할 수 있다.</li>
</ul></li>
<li>Playback URL Request 

<ul>
<li>받은 라이선스를 확인하여 유효한 경우 LocalWebserver Interface의 <code>addLocalFilePathForPlayback</code>, <code>addProgressiveDownloadUrlForPlayback</code>, <code>addHttpLiveStreamUrlForPlayback</code> 함수 호출을 통해 재생 가능한 가상 URL을 요청한다.</li>
</ul></li>
<li>Virtual URL Return

<ul>
<li>SDK는 3번 함수를 통해 Player가 재생 가능한 DRM 컨텐츠의 가상 URL을 리턴하고, Player는 이를 재생하여 사용자에게 보여준다.</li>
</ul></li>
<li>Remove All Temporary License

<ul>
<li><strong>만약 일회용 라이선스를 획득했다면</strong> 프로그램을 종료하거나 <code>removeAllTemporaryLicense</code> 를 호출해야 일회용 라이선스가 삭제된다.</li>
</ul></li>
<li>App Background Entry

<ul>
<li>사용자가 DRM 컨텐츠를 재생 중에 App을 Background로 진입시켰을 때 App은 재생을 멈추고 Player를 reset 한다.</li>
</ul></li>
<li>App Foreground Entry

<ul>
<li>사용자가 Background에 있는 App을 다시 Foreground로 진입시켰을 때 App은 Player의 setDataSource에 URL을 다시 설정을 하고 재생을 하게 된다.</li>
</ul></li>
</ol>
</blockquote>

<p><a href="#doc_top">Top</a></p>

<hr>

<h2 id="toc_3">PallyCon SDK Sample App UI</h2>

<p>SDK Sample App 은 아래 그림과 같이 UI가 구성되어 있다. 
<p><img src="main_activity.png" width="500" height="800"></p>
리스트에 <code>Download</code>, <code>ProgressiveDownload</code>, <code>Http Live Streaming, Local Downloaded</code> 로 구분되어 있다. 각각의 의미는 아래 표와 같다.</p>

<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>Download</td>
<td>원격지에 있는 파일 다운로드</td>
</tr>
<tr>
<td>Progressive Download(PD)</td>
<td>원격지에 있는 미디어 파일 재생</td>
</tr>
<tr>
<td>HTTP Live Streaming(HLS)</td>
<td>HTTP 기반 미디어 스트리밍 재생</td>
</tr>
<tr>
<td>Local Downloaded</td>
<td>디바이스 내 미디어 파일 재생 (Local File)</td>
</tr>
</tbody>
</table>

<p><code>Download</code>는 원격지에 있는 파일을 다운로드한다.
<code>Progressive Download(PD)</code>는 원격지에 있는 암호화된 컨텐츠 파일을 다운로드하면서 재생하는 것을 말한다. 파일을 다운로드하지만 물리적인 파일로 저장하는 것은 아니며 메모리상에만 존재한다.
<code>HTTP Live Streaming(HLS)</code>는 Apple에서 iOS 3.0과 QuickTime X를 위해 2009년에 내놓은 프로토콜로써 HTTP 기반 미디어 스트리밍이다. 재생에 대한 정보는 m3u8 파일을 이용하여 플레이어 전송하며, 암호화된 <code>Key</code>를 복호화하여 재생한다. 
<code>Local Downloaded</code>는 디바이스 내 있는 암호화된 컨텐츠 재생을 의미하며, 다운로드를 받거나 App 에 직접 넣은 파일일 수 있다. </p>

<p><a href="#doc_top">Top</a></p>

<hr>

<h2 id="toc_4">Sample App Playback Test</h2>

<p>SDK Sample App Project를 통해 컨텐츠 형태(Download, Progressive Download, Http Live Streaming)에 따라 각각 재생 테스트 해 볼 수 있다. </p>

<table>
<thead>
<tr>
<th style="text-align: center">Screenshots</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: center"><img src="playback_screen.png" width="700" height="400"></td>
</tr>
<tr>
<td style="text-align: center">Play</td>
</tr>
<tr>
<td style="text-align: center"><img src="content_attr_dialog.png" width="400" height="600"></td>
</tr>
<tr>
<td style="text-align: center">Item Long Click</td>
</tr>
<tr>
<td style="text-align: center"></td>
</tr>
</tbody>
</table>

<h3 id="toc_5">Download</h3>

<ol>
<li>Download 카테고리에서 재생하고자 하는 컨텐츠를 리스트에서 눌려 파일을 다운로드 한다.</li>
<li>다운로드가 완료되면 Local Downloaded 카테고리에 파일이 생긴다.</li>
<li>다운로드 중 Play 버튼을 누르면 다운로드 받으면서 컨텐츠를 재생할 수 있다.</li>
<li>재생이 완료되거나 재생 중에 [완료]를 누르면 리스트로 빠져나갈 수 있다.</li>
</ol>

<h3 id="toc_6">Progressive Download Playback</h3>

<ol>
<li>PD 카테고리에서 재생하고자 하는 컨텐츠를 리스트에서 누른다.</li>
<li>플레이어가 실행되고 컨텐츠 재생이 시작된다.</li>
<li>재생이 완료되거나 재생 중에 [완료]를 누르면 리스트로 빠져나갈 수 있다.</li>
</ol>

<h3 id="toc_7">HTTP Live Streaming Playback</h3>

<ol>
<li>HLS 카테고리에서 재생하고자 하는 컨텐츠를 리스트에서 누른다.</li>
<li>플레이어가 실행되고 컨텐츠 재생이 시작된다.</li>
<li>재생이 완료되거나 재생 중에 [완료]를 누르면 리스트로 빠져나갈 수 있다.</li>
</ol>

<h3 id="toc_8">Local Downloaded</h3>

<ol>
<li>Local Downloaded 카테고리에서 재생하고자 하는 컨텐츠를 리스트에서 누른다.</li>
<li>플레이어가 실행되고 컨텐츠 재생이 시작된다.</li>
<li>재생이 완료되거나 재생 중에 [완료]를 누르면 리스트로 빠져나갈 수 있다.</li>
<li>Local Downloaded 카테고리에서 라이선스를 확인하고 싶은 컨텐츠를 리스트에서 길게 누른다.</li>
<li>다이얼로그가 생성되면서 라이선스 정보와 헤더정보가 나온다.</li>
</ol>

<blockquote>
<p><strong>Note:</strong>
- Progressive Download 컨텐츠의 경우 moov 태그가 뒤에 있으면 정상적으로 작동하지 않을 수 도 있다.</p>
</blockquote>

<p><a href="#doc_top">Top</a></p>

<hr>

<h2 id="toc_9">Test Contents URL</h2>

<p>테스트에 제공되는 컨텐츠는 아래 표와 같다.</p>

<p>| Download Contents |
|-|
| http://cdn.pallycon.com/demo/d/PallyConDownload<em>1.mp4.ncg |
| http://cdn.pallycon.com/demo/d/PallyConDownload</em>2.mp4.ncg |</p>

<p>| Progressive Download |
|-|
| http://cdn.pallycon.com/demo/d/PallyConPD<em>1.mp4.ncg |
| http://cdn.pallycon.com/demo/d/PallyConPD</em>2.mp4.ncg |</p>

<p>| HTTP Live Streaming |
|-|
| http://cdn.pallycon.com/demo/hls/gosigak01/gosigak<em>01.m3u8 |
| http://cdn.pallycon.com/demo/hls/gosigak02/gosigak</em>02.m3u8 |</p>

<p><a href="#doc_top">Top</a></p>

<hr>




</body>

</html>
   </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
